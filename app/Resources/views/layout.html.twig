<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>{% block title %}Welcome!{% endblock %} - ShenBridge</title>

    {% block stylesheet %}
        <!--<link href="{{asset('bundles/framework/css/bootstrap.css')}}" rel="stylesheet">-->
        <link href="{{asset('bundles/framework/css/grid.css')}}" type="text/css" rel="stylesheet"/>
        <link href="{{asset('bundles/framework/css/style.css')}}" type="text/css" rel="stylesheet"/> 
        <link href="{{asset('bundles/framework/css/jquery-ui.css')}}" type="text/css" rel="stylesheet"/>
        <link href="{{asset('bundles/framework/css/device.css')}}" type="text/css" rel="stylesheet"/>          
        <link href="{{asset('bundles/framework/slick/slick.css')}}" rel="stylesheet" type="text/css">
        <link href="{{'/assets/css/custom.css'}}" rel="stylesheet" type="text/css">
        <link href="{{asset('bundles/framework/css/jquery.mCustomScrollbar.min.css')}}" rel="stylesheet">
        <link href="{{asset('bundles/framework/css/fonts/font-awesome/css/font-awesome.min.css')}}" rel="stylesheet">
        <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/jquery.ui.timepicker.addon/1.4.5/jquery-ui-timepicker-addon.min.css">
    	<!--<link rel="stylesheet" href="https://rawgit.com/enyo/dropzone/master/dist/dropzone.css">-->
    	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">      
    {% endblock %}
    
    {% block javascript %}
        <script src="{{asset('bundles/framework/js/jquery-1.8.2.min.js')}}" type="text/javascript"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script src="{{asset('bundles/framework/slick/slick.min.js')}}" type="text/javascript"></script>
        <script src="{{asset('bundles/framework/js/jquery-ui.js')}}"></script>
        <script src="{{asset('bundles/framework/js/jquery.mCustomScrollbar.concat.min.js')}}"></script>
 	    <script src="{{asset('bundles/framework/js/script.js')}}" type="text/javascript"></script>
    {% endblock %}
    
    {% block _meta %}
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
        <meta name="MobileOptimized" content="980" />
        <meta name="HandheldFriendly" content="false" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    {% endblock %}
    
    <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}"/>
</head>

<body>
{% include '::header.html.twig' %}
<script>
    window.fbAsyncInit = function() {
        FB.init({
            appId      : '164967570815052',
            xfbml      : true,
            version    : 'v2.12'
        });
        FB.AppEvents.logPageView();
    };

    (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

<div class="masthead-container">
    <div class="masthead-container_wrapper" id="masthead-container">
        <div class="masthead-container_block user_navigation">
            <ul class="">
                <li><a href="#">
                        {% if(app.user) %}
                            {% if(app.user.avatar != null) %}
                                <span class="img"><img src="{{ asset('bundles/framework/images/user/' ~ app.user.avatar) }}" alt=""/></span>
                            {% else %}
                                <span class="img"><img src="{{ asset('bundles/framework/images/no_avatar.png') }}" alt=""/></span>
                            {% endif %}
                        {% endif %}
                        <span class="link_name">My Profile</span>
                    </a>
                </li>
                <li><a href="#"><i class="fa fa-newspaper-o" aria-hidden="true"></i><span class="link_name">News</span></a></li>
                <li><a href="#"><i class="fa fa-bookmark" aria-hidden="true"></i><span class="link_name">Bookmark</span></a></li>
                <li><a href="#"><i class="fa fa-commenting" aria-hidden="true"></i><span class="link_name">Messages</span><span class="etention">(1)</span></a></li>
                <li><a href="#"><i class="fa fa-user" aria-hidden="true"></i><span class="link_name">Friends</span></a></li>
                <li><a href="#"><i class="fa fa-users" aria-hidden="true"></i><span class="link_name">Tradeland</span></a></li>
                <li><a href="{{ path('photo_index') }}"><i class="fa fa-picture-o" aria-hidden="true"></i><span class="link_name">Photos</span></a></li>
                <li><a href="#"><i class="fa fa-music" aria-hidden="true"></i><span class="link_name">Music</span></a></li>
                <li><a href="{{ path('video_index') }}"><i class="fa fa-film" aria-hidden="true"></i><span class="link_name">Videos</span></a></li>  
                <li><a href="#"><i class="fa fa-gamepad" aria-hidden="true"></i><span class="link_name">Games</span></a></li>
            </ul>
           <!-- <span class="fool_block">More <i class="fa fa-chevron-down" aria-hidden="true"></i></span> -->
        </div>  
        <div class="masthead-container_block user_tradeland">
            <div class="title_block">
                            <strong>My Tradeland</strong>
                        </div>
            <ul class="">
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/user_account_photo.jpg') }}" alt=""/></span><span class="link_name">Courses of acting. Theater-studio "LIC".</span></a></li>
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/trending3.jpg') }}" alt=""/></span><span class="link_name">The film "I woke up from the smell of coffee" (fantasy)</span></a></li>
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/trending4.jpg') }}" alt=""/></span><span class="link_name">Courses of acting. Theater-studio "LIC".</span></a></li>
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/user_account_photo.jpg') }}" alt=""/></span><span class="link_name">Courses of acting. Theater-studio "LIC".</span></a></li>
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/trending3.jpg') }}" alt=""/></span><span class="link_name">The film "I woke up from the smell of coffee" (fantasy)</span></a></li>
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/trending4.jpg') }}" alt=""/></span><span class="link_name">Courses of acting. Theater-studio "LIC".</span></a></li>
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/user_account_photo.jpg') }}" alt=""/></span><span class="link_name">Courses of acting. Theater-studio "LIC".</span></a></li>
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/trending3.jpg') }}" alt=""/></span><span class="link_name">The film "I woke up from the smell of coffee" (fantasy)</span></a></li>
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/trending4.jpg') }}" alt=""/></span><span class="link_name">Courses of acting. Theater-studio "LIC".</span></a></li>
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/user_account_photo.jpg') }}" alt=""/></span><span class="link_name">Courses of acting. Theater-studio "LIC".</span></a></li>
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/trending3.jpg') }}" alt=""/></span><span class="link_name">The film "I woke up from the smell of coffee" (fantasy)</span></a></li>
                <li><a href="#"><span class="img"><img src="{{ asset ('bundles/framework/images/files/upload/trending4.jpg') }}" alt=""/></span><span class="link_name">Courses of acting. Theater-studio "LIC".</span></a></li>
            </ul>          
        </div>            
    </div>      
             
</div>
        
    <div id="wrapper">
        <div id="conteiner">
            <div class="center">
                {% if app.user %}
                    {% block left_column %}
                        {% include '::left_column.html.twig' %}
                    {% endblock %}
                    {% block right_column %}
                        {% include '::right_column.html.twig' %}
                    {% endblock %}
                {% endif %}
                <div class="colum_center" id="article">
                    {% block content %}
                </div>

                {% endblock %}
            </div><!-- center -->
        </div><!-- #conteiner -->
    </div><!-- #wrapper -->
    
<!--
<main>
    <div class="row register_page">
        <div class="col-md-10 content-page">
            {% if app.session.flashBag.has('success') %}
                <div class="alert alert-success">
                    {% for msg in app.session.flashBag.get('success') %}
                        {{ msg }}
                    {% endfor %}
                </div>
            {% endif %}
            {% if app.session.flashBag.has('error') %}
                <div class="alert alert-danger">
                    {% for msg in app.session.flashBag.get('error') %}
                        {{ msg }}
                    {% endfor %}
                </div>
            {% endif %}
            {% if app.user %}
                <div class="timeline_tabs">
                    <ul>
                        <li><a href="{{ path('user_show', {'user': app.user.id}) }}" class="active">My Profile</a></li>
                        <li><a href="{{ path('tradeland_invite') }}">Invite Friends</a></li>
                        <li><a href="{{ path('user_network') }}">My Network</a></li>
                        <li><a href="{{ path('tradeland_index') }}">My tradelands</a></li>
                        <li><a href="{{ path('user_companies') }}">My companies</a></li>
                        <li><a href="{{ path('message_index') }}">My message</a></li>
                    </ul>
                </div>
            {% endif %}

        </div>
    </div>
</main>
-->
{% include '::footer.html.twig' %}



{% block scripts %}
    {#{% include  'AppBundle:Default:modal.html.twig' with {'id': 'login', 'title': 'Login'} %}#}
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="{{ asset('bundles/framework/js/bootstrap.min.js') }}"></script>
    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>

    <script src="{{ asset('bundles/framework/js/main.js') }}"></script>
    <script src="{{ asset('bundles/framework/js/jquery.form.js') }}"></script>

    <!-- messages -->
    <script src="{{ asset('bundles/framework/js/jquery.mCustomScrollbar.concat.min.js') }}"></script>
    <script src="{{ asset('bundles/framework/js/jquery.matchHeight-min.js') }}"></script>
    
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!--<script src="https://cdn.jsdelivr.net/jquery.ui.timepicker.addon/1.4.5/jquery-ui-timepicker-addon.min.js"></script>-->
    <script src="https://rawgit.com/enyo/dropzone/master/dist/dropzone.js"></script>
    <script>
        $(document).ready(function () {

            if ($('.datepicker').length) {
                $('.datepicker').datetimepicker({
                    controlType: 'select',
                    oneLine: true,
                    timeFormat: 'hh:mm tt',
                    minDate: 0, maxDate: "+1M +10D",
                    onSelect: function (selectedDate) {
                        $('.created_at').val(selectedDate);
                        console.log('w');
                    }
                }).hide();
            }
            /*Dropzone.autoDiscover = false;
            var myDropzone = new Dropzone(".dropzone", {
                url: '/media/upload',
                method: 'post',
                addRemoveLinks: true,
                acceptedFiles: 'image/jpeg,image/png,.mp4,.mkv,.avi',
                accept: function (file, done) {
                    $('.image_container').show();
                    return done();
                },
                fallback: function () {
                    console.log('qv');
                }, error: function () {
                    console.log('qv5');
                }, success: function (file, response) {
                    console.log(response);
                    if (file.previewElement) {
                        return file.previewElement.classList.add("dz-success");
                    }
                }, complete: function (file) {
                    console.log(file);
                },   removedfile: function(file) {
                    console.log('q');
                    var ref;
                    if (file.previewElement) {
                        if ((ref = file.previewElement) != null) {
                            ref.parentNode.removeChild(file.previewElement);
                        }
                    }
                    return this._updateMaxFilesReachedClass();
                }
            });*/
        });
    </script>
    <!-- end messages -->
{% endblock %}

<script>
    $(document).ready(function () {
        var Preloader = {
            'element_class': 'preload_ajax',
            'show': function () {
                var element = this.getElement();
                if (element == false) return false;
                element.fadeIn();
            },
            'hide': function () {
                var element = this.getElement();
                if (element == false) return false;
                if (element.is(':animated') == false) element.fadeOut(200);
                else setTimeout(function () {
                    element.fadeOut(200);
                }, 300);
            },
            'getElement': function () {
                if (this.element_class == undefined || this.element_class == '') {
                    alert('no prealoder class');
                    return (false);
                }
                var element = $('.' + this.element_class);
                if (element.length < 1) {
                    alert('No object with this class ' + this.element_class);
                    return (false);
                }
                return element;
            }
        };

        $(document).on('click', '.networks-list .action_item', function (e) {
            e.preventDefault();
            var action = $(this).data('action'),
                provider = $(this).parent().parent().prev().val();
            //console.log($(this).parent().parent().prev().val());

            if (action === 'reload') {
                window.location.href = '/post/feed/' + provider;
            } else if (action === 'remove') {
                window.location.href = '/user/provider/' + provider;
            }
        });

        $(document).on('click', '.user-status li a', function (e) {
            e.preventDefault();
            var parent = $(this).parent(),
                status = $(this).data('status');
            {#url = '{{ path("user_status", {'status': 'status_id'}) }}';#}
            {#url = url.replace("status_id", status);#}
            url = '/user/status/' + status;
            $.ajax({
                url: url,
                type: "POST",
                success: function (data) {
                    parent.addClass('active').siblings().removeClass('active');
                    $('.status').find('.' + status).addClass('active').siblings().removeClass('active');
                }, error: function (data) {
                    console.log(data);
                    console.log('error');

                }
            });
        });

        $(document).on('submit', '.upload_image', function (e) {
            e.preventDefault();

            var form = $(this),
                image = new FormData(this);

            if (form.find('input[type="file"]').val() == '') {
                console.log('Please Add Image');
                form.find('.error').text('Please Add Image').show();

                setTimeout(function () {
                    form.find('.error').empty().hide()
                }, 5000);
                return false;
            }

            Preloader.show();

            $.ajax({
                url: '{{ path('post_new') }}',
                data: image,
                processData: false,
                contentType: false,
                type: "POST",
                success: function (data) {
                    if (data.success) {
                        console.log(data);
                        form.parents('.timeline_container').find('.post_content').val(form.parents('.timeline_container').find('.post_content').val() + '<img src="{{ asset('bundles/framework/images/post/') }}' + data.success + '"/>');
                        form.find('input[type=file]').val('');
                    } else {
                        console.log('error');
                        console.log(data);
                    }
                    Preloader.hide();
                }, error: function (data) {
                    console.log(data);
                    console.log('error');
                    Preloader.hide();
                }
            });

        });

        $(document).on('submit', '.company_image_form', function (e) {
            e.preventDefault();

            var form = $(this),
                image = new FormData(this);

            if (form.find('input[type="file"]').val() == '') {
                console.log('Please Add Image');
                form.find('.error').text('Please Add Image').show();

                setTimeout(function () {
                    form.find('.error').empty().hide()
                }, 5000);
                return false;
            }

            Preloader.show();

            $.ajax({
                url: '{{ path('company_image') }}',
                data: image,
                processData: false,
                contentType: false,
                type: "POST",
                success: function (data) {
                    if (data.success) {
                        console.log(data);
                        $('.image_container').css({
                            "backgroundImage": "url({{ asset('bundles/framework/images/company/') }}" + data.success + ")"
                        });
                        $('#company_logo').val(data.success);
                    } else {
                        console.log('error');
                        $('#company_logo').val('');
                        console.log(data);
                    }
                    Preloader.hide();
                }, error: function (data) {
                    console.log(data);
                    console.log('error');
                    Preloader.hide();
                }
            });
        });

        $(document).on('click', '.industry_block div', function (e) {
            e.preventDefault();

            $('#company_industry').val($(this).text());
            $('.industry_block').hide();
        });

        $(document).on('click', '.vote_btn', function (e) {
            e.preventDefault();
            var el = $(this),
                company = el.data('company'),
                url = '{{ path("company_vote", {'company': 'company_id'}) }}';

            url = url.replace("company_id", company);

            $.ajax({
                url: url,
                type: "POST",
                success: function (data) {
                    if (data.message) {
                        var count = parseInt(el.find('.vote_count').text());

                        if (data.message === 'created') {
                            el.find('.vote_name').html("Voted");
                            el.find('.vote_count').text(count + 1);
                            el.addClass('last_vote').removeClass('first_vote');
                        } else if (data.message === 'removed') {
                            el.find('.vote_name').html("Vote");
                            el.find('.vote_count').text(count - 1);
                            el.addClass('first_vote').removeClass('last_vote');
                        }
                    }

                }, error: function (data) {
                    console.log(data);
                    console.log('error');
                }
            });
        });

        $(document).on('click', '.network_item .connect, .network_item .unfriend', function (e) {
            e.preventDefault();
            var el = $(this),
                connect = el.data('connect'),
                url = '{{ path('network_connect', {'user': 'user_id'}) }}';

            var statusEl = $(this).parent().parent().parent().find('.user-status_current');            

            url = url.replace("user_id", connect);

            $.ajax({
                url: url,
                type: "POST",
                success: function (data) {
                    console.log(data);
                    if (data.message) {
                        if (data.message === 'Pending') {
                            el.html('Cancel request');                                                       
                        } else if (data.message === 'Connect') {
                            el.html('Add Friend');                                                        
                        }
                    }

                }, error: function (data) {

                    console.log('error');
                }
            });
        });

        $('.user-statuses ul li').on('click', function (e) {
            var status = $(this).find('span').attr('data-status');
                                    
            var url = '{{ path('user_status', {'status': 'status_name'}) }}';

            //var statusEl = $(this).parent().parent().parent().find('.user-status_current');            

            url = url.replace("status_name", status);

            $.ajax({
                url: url,
                type: "POST",
                success: function (data) {
                    $('.user-status .user-status_current').empty(); 
                    $('.user-statuses ul li').removeClass('active');
                    switch(status) {
                      case 'away':
                        $('.user-status .user-status_current').append('<i class="fa fa-clock-o" aria-hidden="true"></i>'); 
                        $('.item_away').addClass('active');
                        break;
                      case 'online':
                        $('.user-status .user-status_current').append('<i class="fa fa-check-circle" aria-hidden="true"></i>');
                        $('.item_online').addClass('active'); 
                        break;
                      case 'busy':
                        $('.user-status .user-status_current').append('<i class="fa fa-minus-circle" aria-hidden="true"></i>'); 
                        $('.item_busy').addClass('active');
                        break;
                      case 'invisible':
                        $('.user-status .user-status_current').append('<i class="fa fa-circle-o" aria-hidden="true"></i>'); 
                        $('.item_invisible').addClass('active');
                        break;    
                      default:                        
                        break;
                    }

                }, error: function (data) {

                    console.log('error');
                }
            });
        });

        

        $(document).on('click', '.group_item .join, .group_item .leave', function (e) {
            e.preventDefault();
            var el = $(this),
                tradeland = el.data('group'),
                url = '{{ path('tradeland_connect', {'tradeland': 'tradeland_id'}) }}';

            url = url.replace("tradeland_id", tradeland);

            $.ajax({
                url: url,
                type: "POST",
                success: function (data) {
                    console.log(data);
                    if (data.message) {
                        if (data.message === 'Leave' || data.message === 'Join') {
                            el.find('span').text(data.message);
                        }
                    }
                }, error: function (data) {
                    console.log(data);
                    console.log('error');
                }
            });
        });
    });
</script>

<!--
<link href="{{ asset('bundles/framework/css/lightbox.css') }}" rel="stylesheet">
<link href="{{ asset('bundles/framework/slick/slick.css') }}" rel="stylesheet">
<link href="{{ asset('bundles/framework/slick/slick-theme.css') }}" rel="stylesheet">
<link href="{{ asset('bundles/framework/css/style_lightbox.css') }}" rel="stylesheet">
<script src="{{ asset('bundles/framework/js/lightbox.js') }}"></script>
<script src="{{ asset('bundles/framework/slick/slick.min.js') }}"></script>
<script src="{{ asset('bundles/framework/js/scriptlightbox.js') }}"></script>
<script>
    // Initiate Lightbox
    $(function () {
        $('.images_filter_block .item a').lightbox();
        //        $('.tranding_photo .item a').lightbox();
    });
</script>
-->

<script type="text/javascript">
   /* $(document).on('ready', function () {

        var device = $('body').width();

        $('.tranding_photo_slider').slick({
            nextArrow: '<div class="profitable-button profitable-button-right"></div>',
            prevArrow: '<div class="profitable-button profitable-button-left"></div>',


            dots: true,
            infinite: false,
            speed: 700,
            slidesToShow: 5,
            slidesToScroll: 1,
            variableWidth: true,
            responsive: [
                {
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 4,
                        slidesToScroll: 1,
                        infinite: true,
                        dots: true
                    }
                },
                {
                    breakpoint: 600,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2
                    }
                },
                {
                    breakpoint: 480,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 1
                    }
                }

                // You can unslick at a given breakpoint now by adding:
                // settings: "unslick"
                // instead of a settings object
            ]

        });
    });*/
</script>
<!-------------------------------new files end-------------------------------------->
{% block modals %}
    {% include 'AppBundle:Modal:media.html.twig' %}
{% endblock %}

</body>
</html>
